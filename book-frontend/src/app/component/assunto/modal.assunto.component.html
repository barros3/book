<div class="modal show">
  <div class="modal-content" [ngClass]="{'modal-lg': (isViewMode || isEditMode) && !isDeleteMode}">
    <div class="modal-header">
      <h2 class="modal-title">{{title}}</h2>
      <button type="button" class="close" (click)="closeModal()" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    
    <div class="modal-body">
      <!-- Loading State -->
      <div *ngIf="isLoading" class="text-center">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Carregando...</span>
        </div>
        <p>Carregando dados do assunto...</p>
      </div>
      
      <!-- Conteúdo Principal -->
      <div *ngIf="!isLoading && !isDeleteMode">
        <form class="assunto-form">
          <div class="row mb-3">
            <div class="col-md-12">
              <label for="descricao"><strong>Descrição *</strong></label>
              <input 
                type="text" 
                class="form-control" 
                id="descricao" 
                [(ngModel)]="assunto.descricao" 
                name="descricao"
                [disabled]="isViewMode"
                required>
            </div>
          </div>
          
          <!-- Informações extras para visualização -->
          <div *ngIf="isViewMode" class="row mb-3">
            <div class="col-md-6">
              <label for="codAs"><strong>Código</strong></label>
              <input 
                type="text" 
                class="form-control" 
                id="codAs" 
                [value]="assunto.codAs || 'N/A'"
                disabled>
            </div>
            <div *ngIf="assunto.id" class="col-md-6">
              <label for="id"><strong>ID</strong></label>
              <input 
                type="text" 
                class="form-control" 
                id="id" 
                [value]="assunto.id || 'N/A'"
                disabled>
            </div>
          </div>
        </form>
      </div>

      <!-- Seção de Exclusão -->
      <div *ngIf="isDeleteMode" class="card">
        <div class="card-header bg-danger text-white">
          <h5 class="mb-0">Confirmação de Exclusão</h5>
        </div>
        <div class="card-body text-center">
          <div class="alert alert-warning">
            <i class="bi bi-exclamation-triangle-fill"></i>
            <h4>Atenção!</h4>
            <p>Você está prestes a remover este Assunto:</p>
            <h3 class="text-danger">{{assunto.codAs}}</h3>
            <p><strong>Descrição</strong> {{assunto.descricao}}</p>
            <p>Esta ação não pode ser desfeita.</p>
          </div>
        </div>
      </div>
    </div>
    
    <div class="modal-footer">
      <button 
        type="button" 
        class="btn btn-secondary" 
        (click)="closeModal()">
        Fechar
      </button>
      
      <!-- Botão de Salvar para CREATE/EDIT -->
      <button 
        *ngIf="isEditMode && actionType !== 'delete'"
        type="button" 
        class="btn btn-primary" 
        (click)="salvarAssunto()"
        [disabled]="isLoading || !assunto.descricao">
        <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-1"></span>
        {{ actionType === 'create' ? 'Cadastrar' : 'Salvar Alterações' }}
      </button>
      
      <!-- Botão de Remover para DELETE -->
      <button 
        *ngIf="actionType === 'delete'"
        type="button" 
        class="btn btn-danger" 
        (click)="confirmDelete()"
        [disabled]="isLoading">
        <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-1"></span>
        Confirmar Remoção
      </button>
    </div>
  </div>
</div>